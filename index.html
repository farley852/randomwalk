<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2D Random Walk</title>
    <link rel="stylesheet" href="/src/style.css" />
  </head>
  <body>
    <div id="app">
      <div id="main-column">
        <div id="canvas-container">
          <canvas id="walk-canvas"></canvas>
          <div id="status-indicator"></div>
          <div id="stats-panel">
            <div class="stat-row"><span class="stat-label">Steps</span><span class="stat-value" data-stat="steps">—</span></div>
            <div class="stat-row"><span class="stat-label">Distance</span><span class="stat-value" data-stat="origin-dist">—</span></div>
            <div class="stat-row"><span class="stat-label">Max Dist</span><span class="stat-value" data-stat="max-dist">—</span></div>
            <div class="stat-row"><span class="stat-label">Path Len</span><span class="stat-value" data-stat="path-length">—</span></div>
          </div>
        </div>
        <div id="analytics-panel" class="analytics-panel collapsed">
          <button id="analytics-toggle" class="analytics-toggle">
            <span class="analytics-toggle-icon">&#x25BC;</span> Analytics
          </button>
          <div id="analytics-content" class="analytics-content">
            <div class="analytics-tabs">
              <button class="analytics-tab active" data-tab="msd">MSD</button>
              <button class="analytics-tab" data-tab="step-dist">Step Dist.</button>
              <button class="analytics-tab" data-tab="end-dist">End Dist.</button>
            </div>
            <div class="analytics-chart-area">
              <canvas id="chart-msd" class="analytics-canvas"></canvas>
              <canvas id="chart-step-dist" class="analytics-canvas" style="display:none"></canvas>
              <canvas id="chart-end-dist" class="analytics-canvas" style="display:none"></canvas>
            </div>
            <div id="analytics-info" class="analytics-info">
              <span class="stat-label">Diffusion &alpha;:</span>
              <span id="diffusion-exponent-value" class="stat-value">&mdash;</span>
            </div>
          </div>
        </div>
      </div>
      <div id="controls">
        <div id="drawer-handle"><span></span></div>
        <div class="control-group">
          <label for="seed-slider">Seed: <span id="seed-value">42</span></label>
          <input type="range" id="seed-slider" min="1" max="9999" value="42" step="1" />
        </div>
        <div class="control-group">
          <label for="steps-slider">Steps: <span id="steps-value">500</span></label>
          <input type="range" id="steps-slider" min="10" max="50000" value="500" step="10" />
        </div>
        <div class="control-group">
          <label for="steplength-slider">Step Length: <span id="steplength-value">5</span></label>
          <input type="range" id="steplength-slider" min="1" max="20" value="5" step="1" />
        </div>
        <div class="control-group">
          <label for="walktype-select">Walk Type</label>
          <select id="walktype-select">
            <option value="isotropic">Isotropic (Free)</option>
            <option value="lattice">Lattice (4-dir)</option>
            <option value="levy">Levy Flight</option>
            <option value="self-avoiding">Self-Avoiding</option>
          </select>
        </div>
        <div class="control-group levy-only">
          <label for="levyalpha-slider">Levy &alpha;: <span id="levyalpha-value">1.5</span></label>
          <input type="range" id="levyalpha-slider" min="1.0" max="3.0" value="1.5" step="0.1" />
        </div>
        <div class="control-group">
          <label for="walkcount-slider">Walk Count: <span id="walkcount-value">1</span></label>
          <input type="range" id="walkcount-slider" min="1" max="10" value="1" step="1" />
        </div>
        <div class="control-group">
          <label for="speed-slider">Draw Speed: <span id="speed-value">5</span></label>
          <input type="range" id="speed-slider" min="1" max="500" value="5" step="1" />
        </div>
        <hr class="divider" />
        <div class="control-group">
          <label class="checkbox-label">
            <input type="checkbox" id="trailfade-toggle" />
            Trail Fade
          </label>
        </div>
        <div class="control-group" id="traillength-group">
          <label for="traillength-slider"
            >Trail Length: <span id="traillength-value">100</span></label
          >
          <input type="range" id="traillength-slider" min="10" max="50000" value="100" step="10" />
        </div>
        <hr class="divider" />
        <div class="control-group">
          <label class="checkbox-label">
            <input type="checkbox" id="grid-toggle" />
            Grid
          </label>
        </div>
        <div class="control-group">
          <label class="checkbox-label">
            <input type="checkbox" id="axes-toggle" checked />
            Axes
          </label>
        </div>
        <div class="control-group">
          <label for="gridcellsize-slider">Grid Cell Size: <span id="gridcellsize-value">5</span></label>
          <input type="range" id="gridcellsize-slider" min="1" max="20" value="5" step="1" />
        </div>
        <div class="control-group">
          <label class="checkbox-label">
            <input type="checkbox" id="heatmap-toggle" />
            Heatmap
          </label>
        </div>
        <div class="control-group">
          <label class="checkbox-label">
            <input type="checkbox" id="heatmap-allwalks-toggle" />
            All Walks
          </label>
        </div>
        <div class="control-group" id="heatmap-opacity-group">
          <label for="heatmap-opacity-slider"
            >Opacity: <span id="heatmap-opacity-value">0.5</span></label
          >
          <input
            type="range"
            id="heatmap-opacity-slider"
            min="0.1"
            max="1.0"
            value="0.5"
            step="0.05"
          />
        </div>
        <div class="button-group">
          <button id="play-btn"><span class="btn-text">Play</span> <span class="shortcut-hint">[Space]</span></button>
          <button id="reset-btn"><span class="btn-text">Reset</span> <span class="shortcut-hint">[R]</span></button>
          <button id="export-btn"><span class="btn-text">Export GIF</span> <span class="shortcut-hint">[E]</span></button>
        </div>
      </div>
    </div><!-- /app -->
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
